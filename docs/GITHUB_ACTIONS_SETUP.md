# GitHub Actions ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€GitHub Actionsã§è¨˜äº‹ã®è‡ªå‹•å–å¾—ãƒ»è¦ç´„ã‚’è¨­å®šã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ” 1. Secretsã®è¨­å®š

GitHubãƒªãƒã‚¸ãƒˆãƒªã§APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

### æ‰‹é †

1. GitHubãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. `Settings` ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ `Secrets and variables` > `Actions` ã‚’é¸æŠ
4. `New repository secret` ã‚’ã‚¯ãƒªãƒƒã‚¯

### å¿…è¦ãªSecrets

#### `QIITA_ACCESS_TOKEN`
- **Name:** `QIITA_ACCESS_TOKEN`
- **Value:** Qiitaã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³

å–å¾—æ–¹æ³•:
1. [Qiita](https://qiita.com) ã«ãƒ­ã‚°ã‚¤ãƒ³
2. è¨­å®š > ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ > å€‹äººç”¨ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
3. æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆï¼ˆèª­ã¿å–ã‚Šæ¨©é™ã®ã¿ã§OKï¼‰

#### `ANTHROPIC_API_KEY`
- **Name:** `ANTHROPIC_API_KEY`
- **Value:** Anthropic APIã‚­ãƒ¼

å–å¾—æ–¹æ³•:
1. [Anthropic Console](https://console.anthropic.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. API Keys ã‹ã‚‰æ–°ã—ã„ã‚­ãƒ¼ã‚’ç”Ÿæˆ

## âš™ï¸ 2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®èª¬æ˜

### daily-fetch.yml
æ¯æ—¥è‡ªå‹•ã§è¨˜äº‹ã‚’å–å¾—ãƒ»è¦ç´„ã—ã¾ã™ã€‚

- **å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°:** æ¯æ—¥ 00:00 UTC (09:00 JST)
- **å‡¦ç†å†…å®¹:**
  1. Qiitaã‹ã‚‰æ–°ç€è¨˜äº‹ã‚’å–å¾—
  2. Claude APIã§è¦ç´„
  3. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«æ•´ç†
  4. è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥

### manual-run.yml
æ‰‹å‹•ã§å®Ÿè¡Œã§ãã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚

- **å®Ÿè¡Œæ–¹æ³•:** Actions > Manual Run > Run workflow
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
  - `days_back`: ä½•æ—¥å‰ã‹ã‚‰å–å¾—ã™ã‚‹ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
  - `min_likes`: æœ€ä½ã„ã„ã­æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 10ï¼‰

## ğŸš€ 3. åˆå›å®Ÿè¡Œ

### æ‰‹å‹•å®Ÿè¡Œã§ãƒ†ã‚¹ãƒˆ

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã® `Actions` ã‚¿ãƒ–ã‚’é–‹ã
2. `Manual Run` ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
3. `Run workflow` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šï¼ˆåˆå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§OKï¼‰
5. `Run workflow` ã‚’å®Ÿè¡Œ

### å®Ÿè¡Œçµæœã®ç¢ºèª

- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæˆåŠŸã™ã‚‹ã¨ã€æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã™
- `articles/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®è¨˜äº‹ãŒè¿½åŠ ã•ã‚Œã¾ã™
- `data/articles.db` ã«è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¾ã™

## ğŸ“Š 4. å®Ÿè¡Œãƒ­ã‚°ã®ç¢ºèª

### ãƒ­ã‚°ã®å ´æ‰€

- Actions > å®Ÿè¡Œã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ > è©³ç´°
- `Upload logs` ã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

- `logs/app.log` - ãƒ¡ã‚¤ãƒ³ãƒ­ã‚°
- å„ã‚¹ãƒ†ãƒƒãƒ—ã®æ¨™æº–å‡ºåŠ›

## ğŸ› 5. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå¤±æ•—ã™ã‚‹

#### ã‚¨ãƒ©ãƒ¼: "QIITA_ACCESS_TOKEN is required"
â†’ SecretsãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### ã‚¨ãƒ©ãƒ¼: "ANTHROPIC_API_KEY is required"
â†’ Anthropic APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### ã‚¨ãƒ©ãƒ¼: "Permission denied"
â†’ ãƒªãƒã‚¸ãƒˆãƒªã®Settings > Actions > General > Workflow permissions ã§ `Read and write permissions` ã‚’æœ‰åŠ¹åŒ–

### è¨˜äº‹ãŒå–å¾—ã§ããªã„

#### æ¡ä»¶ã«åˆã†è¨˜äº‹ãŒãªã„
â†’ `config/config.yaml` ã® `min_likes` ã‚’ä¸‹ã’ã‚‹
â†’ `days_back` ã‚’å¢—ã‚„ã™

#### APIãƒ¬ãƒ¼ãƒˆåˆ¶é™
â†’ å°‘ã—æ™‚é–“ã‚’ç½®ã„ã¦ã‹ã‚‰å†å®Ÿè¡Œ

## âš™ï¸ 6. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### å®Ÿè¡Œæ™‚åˆ»ã®å¤‰æ›´

`.github/workflows/daily-fetch.yml` ã® cron ã‚’ç·¨é›†:

```yaml
schedule:
  # 18:00 UTC (03:00 JST) ã«å®Ÿè¡Œ
  - cron: '0 18 * * *'
```

### å–å¾—æ¡ä»¶ã®å¤‰æ›´

`config/config.yaml` ã‚’ç·¨é›†:

```yaml
qiita:
  per_page: 50        # å–å¾—æ•°ã‚’å¢—ã‚„ã™
  days_back: 3        # 3æ—¥å‰ã‹ã‚‰å–å¾—
  min_likes: 5        # ã„ã„ã­æ•°ã‚’ä¸‹ã’ã‚‹
```

## ğŸ’° 7. ã‚³ã‚¹ãƒˆç®¡ç†

### GitHub Actions
- Publicãƒªãƒã‚¸ãƒˆãƒª: ç„¡åˆ¶é™
- Privateãƒªãƒã‚¸ãƒˆãƒª: æœˆ2,000åˆ†ã¾ã§ç„¡æ–™

### Claude API
- 1æ—¥20è¨˜äº‹å‡¦ç†: ç´„ $0.22
- æœˆé–“ï¼ˆ30æ—¥ï¼‰: ç´„ $6.60

### ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ãƒ’ãƒ³ãƒˆ

1. **å–å¾—æ•°ã‚’æ¸›ã‚‰ã™**
   ```yaml
   qiita:
     per_page: 10
     min_likes: 20
   ```

2. **Claude Haikuã‚’ä½¿ç”¨**
   ```yaml
   claude:
     model: "claude-haiku-4-20250514"
   ```

3. **å®Ÿè¡Œé »åº¦ã‚’ä¸‹ã’ã‚‹**
   ```yaml
   schedule:
     - cron: '0 0 * * 1,4'  # æœˆãƒ»æœ¨ã®ã¿
   ```

## ğŸ“ 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [ ] é€±æ¬¡ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ
- [ ] Zennè¨˜äº‹ã®å–å¾—
- [ ] Slack/Discordé€šçŸ¥
- [ ] Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Qiita API v2](https://qiita.com/api/v2/docs)
- [Anthropic API Documentation](https://docs.anthropic.com/)
